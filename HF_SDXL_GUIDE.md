# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é HF SDXL Generator

## üìã –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

- `hf_sdxl_generator.py` - –≥–æ—Ç–æ–≤—ã–π Gradio –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è SDXL –º–æ–¥–µ–ª–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ requirements.txt

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `requirements.txt` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```
gradio>=4.0.0
diffusers>=0.25.0
transformers>=4.30.0
torch>=2.0.0
safetensors>=0.4.0
Pillow>=10.0.0
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É:**
```bash
echo "gradio>=4.0.0
diffusers>=0.25.0
transformers>=4.30.0
torch>=2.0.0
safetensors>=0.4.0
Pillow>=10.0.0" > requirements.txt
```

### 2. –ò–∑–º–µ–Ω–∏—Ç–µ ID –º–æ–¥–µ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `hf_sdxl_generator.py` –∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```python
generator = SDXLGenerator(model_id="username/my-custom-model")
```

–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à—É –º–æ–¥–µ–ª—å:

```python
generator = SDXLGenerator(model_id="null7x/your-merged-model")
```

**–ì–¥–µ –Ω–∞–π—Ç–∏ ID —Å–≤–æ–µ–π –º–æ–¥–µ–ª–∏:**
- –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–∞ HF: –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–æ–¥–µ–ª–∏
- ID –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ URL: `https://huggingface.co/{ID}`
- –ü—Ä–∏–º–µ—Ä: `https://huggingface.co/Aminjon2005/sdxl-model-merger` ‚Üí ID = `Aminjon2005/sdxl-model-merger`

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
python hf_sdxl_generator.py
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π Gradio –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ `http://localhost:7860`

### 4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ Hugging Face Spaces

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Git**

```bash
git remote add huggingface https://username:hf_YOUR_TOKEN@huggingface.co/spaces/username/your-space.git
git push huggingface main
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

1. –°–æ–∑–¥–∞–π—Ç–µ Space –Ω–∞ https://huggingface.co/spaces/create
2. –í—ã–±–µ—Ä–∏—Ç–µ **Gradio** –∫–∞–∫ SDK
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã:
   - `hf_sdxl_generator.py` ‚Üí –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `app.py`
   - `requirements.txt`

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º—Ç (Prompt)
–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–≤–∏–¥–µ—Ç—å –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏. –ü—Ä–∏–º–µ—Ä—ã:
- "–∫—Ä–∞—Å–∏–≤—ã–π –ø–µ–π–∑–∞–∂ —Å –≥–æ—Ä–∞–º–∏ –∏ –∑–∞–∫–∞—Ç–æ–º, —Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, 4k"
- "–ø–æ—Ä—Ç—Ä–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–π –¥–µ–≤—É—à–∫–∏, –¥–µ—Ç–∞–ª—å–Ω—ã–π, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ"
- "—Ñ—É—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≥–æ—Ä–æ–¥, –∫–∏–±–µ—Ä–ø–∞–Ω–∫, –Ω–µ–æ–Ω–æ–≤—ã–µ –æ–≥–Ω–∏"

### –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–º—Ç (Negative Prompt)
–ß—Ç–æ –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏:
- "low quality, blurry, distorted, ugly, bad anatomy"
- "—Ä–∞–∑–º—ã—Ç–æ–µ, –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –∏—Å–∫–∞–∂—ë–Ω–Ω–æ–µ"

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ (Steps)
- **10-15:** –ë—ã—Å—Ç—Ä–æ, –Ω–æ —Ö—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **20-30:** –•–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **40-50:** –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ
- **–ú–∞–∫—Å–∏–º—É–º 50** –Ω–∞ CPU

## üîß –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
–í –º–µ—Ç–æ–¥–µ `generate`, –∏–∑–º–µ–Ω–∏—Ç–µ:
```python
height=512,
width=512
```

–ù–∞ –∂–µ–ª–∞–µ–º–æ–µ (–∫—Ä–∞—Ç–Ω–æ–µ 64):
```python
height=768,
width=768
```

### –ò–∑–º–µ–Ω–∏—Ç—å guidance scale
```python
guidance_scale=7.5  # –ú–∏–Ω: 1, –ú–∞–∫—Å: 20
```

–í—ã—à–µ = –±–æ–ª—å—à–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø—Ä–æ–º—Ç—É, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —Ç–≤–æ—Ä—á–µ—Å–∫–∏

### –£–±—Ä–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã
–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ `gr.Examples`:
```python
# gr.Examples(
#     examples=[...],
#     ...
# )
```

### –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
–î–æ–±–∞–≤—å—Ç–µ —Å–ª–∞–π–¥–µ—Ä –¥–ª—è guidance_scale:
```python
guidance_scale = gr.Slider(
    label="Guidance Scale (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–º—Ç—É)",
    minimum=1,
    maximum=20,
    value=7.5,
    step=0.5
)
```

–ò –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ —Ñ—É–Ω–∫—Ü–∏—é `on_generate` –∏ `generator.generate()`

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –õ—É—á—à–∏–µ –ø—Ä–æ–º—Ç—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª—è–π—Ç–µ —Å—Ç–∏–ª—å: "photorealistic", "oil painting", "digital art"
- –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ: "high quality", "masterpiece", "4k"
- –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö –ø—Ä–æ–º—Ç–æ–≤:
  - "a cute cat, photorealistic, detailed fur, studio lighting, 4k"
  - "cyberpunk city at night, neon lights, wet streets, detailed"

### –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ CPU
- –£–º–µ–Ω—å—à–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ (–º–∏–Ω–∏–º—É–º 10)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (384x384)
- –û—Ç–∫–ª—é—á–∞–π—Ç–µ negative_prompt –µ—Å–ª–∏ –æ–Ω –ø—É—Å—Ç–æ–π

### –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏
–ï—Å–ª–∏ –≤—ã–ª–∞–∑—è—Ç –æ—à–∏–±–∫–∏ –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```python
self.pipe.enable_model_cpu_offload()  # –í–º–µ—Å—Ç–æ to(device)
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –ø–µ–π–∑–∞–∂
- **Prompt:** "beautiful sunset over mountains, golden hour, photorealistic, 4k"
- **Negative:** "low quality, blurry"
- **Steps:** 20

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ—Ä—Ç—Ä–µ—Ç
- **Prompt:** "portrait of a beautiful woman, detailed face, professional photography, studio light"
- **Negative:** "bad anatomy, distorted face, ugly"
- **Steps:** 25

### –ü—Ä–∏–º–µ—Ä 3: –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞
- **Prompt:** "a magical castle floating in clouds, fantasy style, detailed architecture"
- **Negative:** "realistic, modern"
- **Steps:** 30

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "Model not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –º–æ–¥–µ–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ `model_id=`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –ø—É–±–ª–∏—á–Ω–∞—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –û—à–∏–±–∫–∞ –ø–∞–º—è—Ç–∏ (Out of Memory)
- –£–º–µ–Ω—å—à—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å 512x512 –Ω–∞ 384x384
- –£–º–µ–Ω—å—à—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `enable_model_cpu_offload()`

### –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ù–∞ CPU —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ (5-15 –º–∏–Ω—É—Ç)
- –£–º–µ–Ω—å—à—å—Ç–µ —à–∞–≥–∏ –¥–æ 15-20
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ

### –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ù–∞–ø–∏—à–∏—Ç–µ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–º—Ç
- –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤ –¥–æ 30-40
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –º–æ–¥–µ–ª—å –¥–ª—è –≤–∞—à–µ–π –∑–∞–¥–∞—á–∏

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Gradio –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.gradio.app/docs/)
- [Diffusers –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://huggingface.co/docs/diffusers/)
- [HF Spaces –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://huggingface.co/docs/hub/spaces)
- [SDXL –Ω–∞ HF](https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0)

---

**–°–æ–∑–¥–∞–Ω–æ:** 22 –Ω–æ—è–±—Ä—è 2025  
**–¢–∏–ø:** Gradio + Diffusers + Torch  
**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:** CPU (free tier HF Spaces)
